<!DOCTYPE html>
<head>
<link rel="icon" href="Data/iconFav.png" type="image/png">
<meta name="viewport" content="width=320, initial-scale=1, maximum-scale=1, user-scalable=0"/> <!-- prevents zooming on mobile devices....number-based width or "device-width"-->
<title id = 'title'>FOSSILS</title>
    <style type="text/css">
        Body
            {
                color:white;
                line-height:110%;
                font-size:1.2vw;
                font-family:Courrier New;
                font-weight: bold;
                text-align:center;
                vertical-align:middle;
                padding:0px;
                margin:0px;
                
            }
        X1{color:red;}
        X2{color:white;}
        X3{color:blue;}
        X4{line-height:100%;color:yellow;}
        X5{line-height:150%;color:green;}
   
    
    </style>
    </head>

<body onresize="realign()">

<img id='picData' style='position:fixed; left:0%;width:10%;display:block;z-index:500;'>
    
<!--MAIN SCREEN ==============================================================================--> 
<div id='background' style="position:fixed;display:block ;background-image:url('Data/backgroundB.jpg'); background-size:100% 100%;line-height:100%; font-size:2.5vw; left:0%; top:0%; right:0%; bottom:0%; z-index:1000;">
    
    <img id='hdr' src="Data/fatf.png" style="position:fixed;display:none;left:30%;height:10%;z-index:300;">
        

<!--ADMIN-->    
    <img title='Administrators Screen (password Required!)' id='admin' src='Data/transparent.png' onclick="admin()" style="position:absolute;display:block;opacity:1; width:5%; top:0%; right:0%;z-index:400">

<!--ICON A-->    
    <img id='iconA' title='Clicking me always brings you home!' src='Data/player.png' onclick="realign(),msg(WELCOMEstring,0)" style="position:absolute;display:none;opacity:0; width:1%; top:0%; left:0%;z-index:500">
   
<!--MENU-->      
    <div id='menu' style="position:absolute;text-align:center;display:block;opacity:0; line-height:130%;border:none; font-size:2.5vw; left:19vw; right:60vw; top:5vw;  bottom:1vw; overflow-x:hidden";>
        <div id='0'onclick="msg(WELCOMEstring,this.id)"style="position:absolute;"> HOME</div>
        <div id='1'onclick="msg(CONTACTstring,this.id)"style="position:absolute;"> CONTACT</div>
        <div id='2'onclick="msg(ABOUTstring,this.id)"style="position:absolute;"> ABOUT ME</div>
        <div id='3'onclick="msg(PLAYLISTstring,this.id)"style="position:absolute;"> PLAYLIST</div>
        <div id='4'onclick="msg(SCHEDULEstring,this.id)"style="position:absolute;"> SCHEDULE</div>            
        <div id='5'onclick="msg(WHYstring,this.id)"style="position:absolute; border:none;"> GHOST BAND</div>
        <div id='6'onclick="msg(BANDstring,this.id)"style="position:absolute; border:none;"> GADGETS</div>
        <div id='7'onclick="msg(LISTENstring,this.id),tracksView()" style="position:absolute;display:block; border:none;"> LISTEN</div>
        <div id='8'onclick="msg('GALLERY',this.id),PIC=0;gallery(0)" style="position:absolute;display:block;border:none;"> GALLERY</div>
        <img id='9' title='Toggle Full Screen!'onclick="fullScreen()" src="Data/blackEnterFullScreen.png" style="position:absolute;">
        <div id='10' style="position:absolute;display:block;border:none;"> </div><!--onclick="msg('Nothing',this.id)"-->
    </div>

<!--MSG-->
<div id='msg'style="position:absolute; opacity:0;color:black; font-family:Courrier New; font-weight:bold; display:block; line-height:130%; overflow-y:scroll; background-image:url('Data/parchmentA.jpg'); background-size:100% 100%; border:groove; font-size:3vw; text-align:center; left:20vw; right:20vw; top:5vw; bottom:1vw; z-index:50; z-index:50;overflow-y:auto;word-break: keep-all">
    MESSAGE APPEARS HERE...
    </div>

<!--viewbox-->      
    <div id='viewBox'style="position:absolute;display:none;font-size:3vw;background-color:black;border:solid;border-color:black;overflow:hidden;left:0vw;right:0vw; top:0vw; bottom:0vw; z-index:450;">
        <div id ='picFrame' style='position:absolute;display:block;border:none;left:0%; top:0%; height:85%; width:100%;'>
            <img id='galleryPic' style='position:absolute;display:block;left:0%;height:100%;width:100%;bottom:0%'>
        </div>                                                                                                                                                                                
        <div id='picCount'style="position:absolute;line-height:50%;background-color:black;display:block;font-size:10vh;opacity:1;;font-weight:bold;font-size:4vh; right:1%;top:1%;">1/7</div>
        <div id='picLeft' onclick="gallery(-1)" style="position:absolute;line-height:50%;background-color:grey;display:none;font-size:10vh;opacity:0.9;display:none;font-weight:bold;font-size:8vh; left:1%;top:47%;"><</div>
        <div id='picRight' onclick="gallery(+1)"style="position:absolute;line-height:50%;background-color:grey;display:none;font-size:10vh;opacity:0.9;display:none;font-weight:bold;font-size:8vh;right:1%;top:47%;">></div>
        <div id='galleryTxt' onclick="aspect()" style='position:absolute;color:white; line-height:150%;border:none;left:0%; top:85%;left:10%;height:10%;width:80%;'>
            How I see the 'Virtual' Band
        </div>
       
    </div>
</div>
<script language:javascript>
//GLOBAL VARIABLES===============================================
var FULLscreen=false
var LOCKED=true;
var WELCOMEstring;
var BANDstring;
var ABOUTstring;
var SCHEDULEstring;
var PLAYLISTstring;
var WHYstring;
var LISTENstring;
var LISTENarray
var ADMINstring;
var TEMPstring = null;
var HELPstring = "Looking for help...tough";
var TESTstring = 'This is the test string. And it looks like this... Here is A Break<br>Title<br>';
var TIMEOUTfade
var TIMEOUTgallery;
var TRACK=0
var PICcount=7;
var PIC=1
var PICpath
var PICaspect
var MODE='STD'
var ARRgallery = "0,1,2,3,4,5".split(',')
/*z-index  map============================================
 Base0
 menu    50
 msg     50 
 contact 100
 admin   200
 Boot    300
 Icons   400
 viewBox 500
 */
//BOOT=============================================================


function tracksView(){
    dis('listenList')
    if (document.getElementById('listenList').style.display=='block') {
        document.getElementById('playlistButton').src='Data/pointerUp.png';
    }else{
        document.getElementById('playlistButton').src='Data/pointerDown.png';
    }
}

function playTrack(track,num) {
    document.getElementById('songData').innerHTML = LISTENarray[num];
    TRACK = track;
    tracksView();
    document.getElementById('Audio1').src = 'Data/' +track+ '.mp3';
    document.getElementById('Audio1').play();
    document.getElementById('songTitle').innerHTML=track;
}

window.onload = function() {
    BANDstring = fileDownload('Data/bandString.txt');
    ABOUTstring = fileDownload('Data/aboutString.txt');
    SCHEDULEstring = fileDownload('Data/scheduleString.txt');
    PLAYLISTstring = fileDownload('Data/playlistString.txt');
    WHYstring = fileDownload('Data/whyString.txt');
    WELCOMEstring = fileDownload('Data/welcomeString.txt');
    LISTENstring = fileDownload('Data/listenString.txt');
    CONTACTstring = fileDownload('Data/contactString.txt');
    LISTENarray = fileDownload('Data/listenArray.txt').split('|');
    msg(WELCOMEstring, 0);
    realign();
    loadGallery(0);
    document.getElementById('hdr').style.opacity = 0
    document.getElementById('hdr').style.display = 'block'
    LOCKED = true //lock design area
    fades('hdr', 0.01, 10, 'msg|menu|iconA')
}

function msg(str, id) {
    MODE = 'STD';
    var i;
    cto()
    document.getElementById('msg').innerHTML = str;
    document.getElementById('msg').style.display = 'block';
    document.getElementById('viewBox').style.display = 'none';
    for (i = 0; i <= 8; i++) {
        if (id == i) {
            document.getElementById(i).style.color = 'red';
            document.getElementById(i).style.backgroundColor = 'yellow';
        } else {
            document.getElementById(i).style.color = 'white';
            document.getElementById(i).style.backgroundColor = 'transparent';
        }
    }
    if (id == 8) {
        MODE = "GALLERY"
        document.getElementById('viewBox').style.display = 'block'
    }
    realign()
}

function realign() { //TALL ASPECT  (this order left-right-top-bottom-height-width-font)
    if (window.innerHeight / window.innerWidth > 0.8) { //TALL
        document.getElementById('msg').style.border = "groove";
        document.getElementById('menu').style.border = "none";
        //l,r,t,b,h,w,f
        //shapeShift('hdr', '-', '-', '-', '-', '-', '-', '2.8vh');
        shapeShift('hdr', '7%', '-', '0%', '-', '4.5%', '-', '3.5vw');
        shapeShift('viewBox', '0%', '0%', '-', '28%', '-', '-', '3vw');
        shapeShift('menu', '1vw', '1vw', '72vh', '1vw', '-', '-', '3vw');
        shapeShift('msg', '10%', '1%', '5%', '28%', '-', '-', '3vh');
        if (MODE == 'LISTEN') {
            shapeShift('songTitle', '-', '-', '-', '-', '-', '-', '6vw');
        }
        shapeShift(0, '34%', '-', '0%', '-', '4vw', '32%', '4vw');
        shapeShift(1, '1%', '-', '25%', '-', '4vw', '32%', '4vw');
        shapeShift(2, '1%', '-', '50%', '-', '4vw', '32%', '4vw');
        shapeShift(3, '1%', '-', '75%', '-', '4vw', '32%', '4vw');
        shapeShift(4, '34%', '-', '25%', '-', '4vw', '32%', '4vw');
        shapeShift(5, '34%', '-', '50%', '-', '4vw', '32%', '4vw');
        shapeShift(6, '34%', '-', '75%', '-', '4vw', '32%', '4vw');
        shapeShift(7, '67%', '-', '25%', '-', '4vw', '32%', '4vw');
        shapeShift(8, '67%', '-', '50%', '-', '4vw', '32%', '4vw');
        shapeShift(9, '-', '0%', '75%', '-', '4vw', '', '4vw');
        shapeShift(10, '67%', '-', '75%', '-', '25%', '25%', '4vw');
        if (MODE == 'STD') {
            shapeShift('iconA', '' - '%', '-', '2%', '-', '-', '10vw', '-')
        } else {
            shapeShift('iconA', '' - '%', '-', '2%', '-', '-', '8vw', '-')
        }
    } else { //WIDE ASPECT
        shapeShift('hdr', '20%', '-', '0%', '-', '8%', '-', '3.5vw');
        //shapeShift('hdr', '-', '-', '-', '-', '-', '-', '3.5vw');
        if (MODE == 'LISTEN') {
            shapeShift('songTitle', '-', '-', '-', '-', '-', '-', '3.5vw');
        }
        shapeShift('viewBox', '-', '20%', '-', '0%', '-', '-', '2.5vw');
        shapeShift('msg', '20%', '20%', '8%', '1%', '-', '-', '2vw');
        shapeShift('menu', '80vw', '1vw', '10%', '1vw', '-', '-', '1.6vw');
        shapeShift(0, '2%', '-', '0%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(1, '2%', '-', '10%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(2, '2%', '-', '20%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(3, '2%', '-', '30%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(4, '2%', '-', '40%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(5, '2%', '-', '50%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(6, '2%', '-', '60%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(7, '2%', '-', '70%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(8, '2%', '-', '80%', '-', '2.5vw', '100%', '2.5vw');
        shapeShift(9, '-', '0%', '90%', '-', '2.5vw', '-', '2.5vw');
        shapeShift(10, '0%', '-', '90%', '-', '10%', '60%', '2.5vw');
        if (MODE == 'STD') {
            shapeShift('iconA', '0%', '-', '2%', '-', '-', '20vw', '-')
        } else {
            shapeShift('iconA', '0%', '-', '2%', '-', '-', '6vw', '-')
        }
    }
    picAlign()
}

function shapeShift(id, lf, rt, tp, bm, ht, wt, fs) {
    if (lf != '-') {
        document.getElementById(id).style.left = lf;
    }
    if (rt !== '-') {
        document.getElementById(id).style.right = rt;
    }
    if (tp !== '-') {
        document.getElementById(id).style.top = tp;
    }
    if (bm !== '-') {
        document.getElementById(id).style.bottom = bm;
    }
    if (ht !== '-') {
        document.getElementById(id).style.height = ht;
    }
    if (wt !== '-') {
        document.getElementById(id).style.width = wt;
    }
    if (fs !== '-') {
        document.getElementById(id).style.fontSize = fs;
    }
}

function loadGallery() {
    ARRgallery = "0,1,2,3,4,5,6".split(',')
    ARRgallery[0] = "1968? Chuck, Bill, yours truly and Jay. Playing as 'JAM' in Butte Montana|firstBand.jpg|1219|810";
    ARRgallery[1] = "Me, 50 years ago playing bass at a Montana State University Spring Event...|bass.png|1316|1940";
    ARRgallery[2] = "Thats Ron (on the right), who got me back into playing guitar after a 45 year hiatus...|ron.jpg|1051|788";
    ARRgallery[3] = "At a Newcomers Christmas party with my buddy, Pat, who passed away in November of 2019|pat.jpg|1051|855";
    ARRgallery[4] = "My friends, Stan, Bill, John, Sally and I playing for the fun of it...|barn.jpg|2754|1660";
    ARRgallery[5] = "At St Catherine's, one of my current monthly gigs...|fred.jpg|1641|3919";
    ARRgallery[6] = "How I imagine my 'virtual' backup band...|folkBand.png|581|575";
    PICcount = ARRgallery.length
}

function fades(id, dir, ms, ids) {
    document.getElementById(id).style.display = 'block' //secure starting point
    if (document.getElementById(id).style.opacity == NaN) {
        alert("UNDEFINED Opacity for " + id)
    }
    var arr;
    var cur = parseFloat(parseFloat(document.getElementById(id).style.opacity, 10) + dir, 10)
    if (cur >= 1 | cur <= 0) {
        clearTimeout(TIMEOUTfade)
        document.getElementById(id).style.display = 'block'
        if (cur > 0.6) document.getElementById(id).style.opacity = 1;
        if (cur < 0.4) document.getElementById(id).style.opacity = 0;
        arr = ids.split('|')
        id = arr[0]
        arr.shift()
        ids = arr.join('|')
        if (id == null | id == undefined | id == '' | id == ' ') {
            return;
        } else {
            fades(id, dir, ms, ids)
        }
    } else {
        TIMEOUTfade = setTimeout(function() {
            document.getElementById(id).style.opacity = cur;
            fades(id, dir, ms, ids)
        }, ms);
    }
}
//USER FUNCTIONS===========================================================

function gallery(n) {
    if (n == undefined) {
        n = 0
    }
    document.getElementById('galleryPic').style.display = 'none'
    document.getElementById('iconA').style.width = '8vw';
    PIC = PIC + n;
    PICpath = "Data/"
    MODE = 'GALLERY'
    document.getElementById('viewBox').style.display = 'block';
    if (PIC == 0) {
        document.getElementById('picLeft').style.display = 'none'
    } else {
        document.getElementById('picLeft').style.display = 'block'
        document.getElementById('iconA').style.top = '2%'
    }
    if (PIC == ARRgallery.length - 1) {
        document.getElementById('picRight').style.display = 'none'
    } else {
        document.getElementById('picRight').style.display = 'block'
    }
    document.getElementById('galleryPic').src = PICpath + ARRgallery[PIC].split('|')[1]
    document.getElementById('viewBox').style.display = 'block' //hide msg div
    document.getElementById('msg').style.display = 'none' //hide msg div
    PICaspect = ARRgallery[PIC].split('|')[2] / ARRgallery[PIC].split('|')[3] //=w/h
    document.getElementById('galleryTxt').innerHTML = ARRgallery[PIC].split('|')[0];
    picAlign();
    document.getElementById('picCount').innerHTML = parseInt(PIC + 1, 10) + "/" + PICcount;
}

function picAlign() {
    var frameAspect = document.getElementById('picFrame').clientWidth / document.getElementById('picFrame').clientHeight
    var factor = PICaspect / frameAspect
    if (factor < 1) {
        document.getElementById('galleryPic').style.height = "100%"
        document.getElementById('galleryPic').style.width = factor * 100 + "%"
        document.getElementById('galleryPic').style.left = 50 * (1 - factor) + "%"
        document.getElementById('galleryPic').style.bottom = "0%"
    } else {
        document.getElementById('galleryPic').style.width = "100%"
        document.getElementById('galleryPic').style.height = 1 / factor * 100 + "%"
        document.getElementById('galleryPic').style.left = "0%"
        document.getElementById('galleryPic').style.bottom = 50 * (1 - (1 / factor)) + "%"
    }
    document.getElementById('galleryPic').style.display = 'block'
}

function admin() {
    if (LOCKED == true) {
        var f = prompt('ADMINISTRATORS PASSWORD?');
        if (f == null) {
            return;
        }
        ADMINstring = fileDownload("Data/" + f + ".txt");
        if (ADMINstring.substring(0, 3) == '404') {
            alert("Sorry...\n Wrong password...")
        } else {
            LOCKED = false
            document.getElementById('admin').src = 'Data/underConstruction.png'
        }
    } else {
        msg(ADMINstring)
    }
}

function fullScreen() {
    if (FULLscreen == false) {
        launchIntoFullscreen(document.documentElement);
        document.getElementById('9').src = 'Data/blackExitFullScreen.png';
        FULLscreen = true
    } else {
        exitFullscreen();
        FULLscreen = false
        document.getElementById('9').src = 'Data/blackEnterFullScreen.png';
    }
}

function launchIntoFullscreen(element) {
    if (element.requestFullscreen) {
        element.requestFullscreen();
    } else if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.webkitRequestFullscreen) {
        element.webkitRequestFullscreen();
    } else if (element.msRequestFullscreen) {
        element.msRequestFullscreen();
    }
}

function exitFullscreen() {
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
    } else if (element.msCancelFullscreen) {
        document.msCancelFullscreen();
    }
} //this step is BOGUS

//UTILITY FUNCTIONS===========================================================================

function aspect() {
    if (LOCKED == false) {
        var w = document.getElementById('galleryPic').naturalWidth
        var h = document.getElementById('galleryPic').naturalHeight
        var a = w / h
        alert("Picture Aspect Information:+\n  Width: " + w + "px\n  Height: " + h + "px\n  Aspect Ratio: " + a)
    }
}

function cto() {
    clearTimeout(TIMEOUTgallery);
}

function fade(id, dir, ms) {
    var crp = parseFloat(document.getElementById(id).style.opacity, 10)
    var cur = parseFloat(crp + dir, 10)
    if (cur >= 1 | cur < 0) {
        clearTimeout(TIMEOUTfade)
        document.getElementById(id).style.display = 'block'
    } else if (cur == 0) {
        clearTimeout(TIMEOUTfade)
        document.getElementById(id).style.display = 'none'
    } else {
        TIMEOUTfade = setTimeout(function() {
            document.getElementById(id).style.opacity = cur;
            fade(id, dir, ms)
        }, ms);
    }
}

function switchTrack(path) {
    var done = 1;
    var hint = "Switched Tracks..."
    document.getElementById('hint').innerHTML = "Changing Tracks..." + CAL
    SWITCHtune = Audio1.currentTime
    SWITCHtime = new Date().getTime();
    //document.getElementById('hint').innerHTML=base
    Audio1.src = path;
    type = "audio/mpeg"
    Audio1.currentTime = SWITCHtune + 0.2
    Audio1.play();
    CHECKtune = Audio1.currentTime
    CHECKtime = new Date().getTime();
    setTimeout(function() {
        hint = "Switched at Tune time:" + SWITCHtune;
        hint = hint + "---Checked at Tune Time:" + CHECKtune;
        hint = hint + "---DELTA:" + parseFloat(CHECKtune - SWITCHtune);
        hint = hint + "<br>Switched at Real Time" + SWITCHtime;
        hint = hint + "---Checked at Real Time" + CHECKtime;
        hint = hint + "---DELTA:" + parseFloat(CHECKtime - SWITCHtime, 10);
        document.getElementById('hint').innerHTML = hint
    }, 1000);
    document.getElementById('hint').innerHTML = hint
}

function fileDownload(path) {
    var content = "Attemping to Download" + path;
    var request = new XMLHttpRequest();
    request.open("GET", path, false);
    request.send(null);
    content = request.responseText;
    if (content.search("404") > -1 | content.length < 1) {
        content = '404 Error' + content
    }
    return content; //could be undfined or null, not tested for
}


function dis(id, disp) {
    if (disp === undefined) {
        if (document.getElementById(id).style.display == 'none') {
            document.getElementById(id).style.display = 'block';
        } else {
            document.getElementById(id).style.display = 'none';
        }
    } else {
        if (disp == 'none') {
            document.getElementById(id).style.display = 'none';
        } else {
            document.getElementById(id).style.display = 'block';
        }
    }
}
</script>
</body>
</html>