<!DOCTYPE html><html><head><title id = 'title'>NOTES</title>
<style type:+text-css">
Body
    {
        font-size : 2vw;
        margin :0vh; padding: 0;
        font-family:courrier monospace;
        font-weight:bold;
        line-height:100%;
        text-align:Left;
        background-color:white;
    }
    
    X1{color:red;background-color:yellow}
    X2{color:blue;background-color:white}
    X3{color:black;background-color:lightgrey}
    X4{color:black;background-color:white}
    
 img{height:6vw;width:6vw}  
</style></head>


<body>
<div id="header" style="text-align: left;font-size: 3vw">TITLE will appear here...</div>    
<pre>
<div id="notes">notes will appear here...</div> 
</pre>

<script type="text/javascript">
    var TITLE ="No title passed...";
    var ARRlines ='';
    var LONGline =50

    window.onload = function()
    {  
        var iconLine ="";
        var htmlStr="";
        var j =0;
        var x = (decodeURIComponent(window.location.toString())).split("?"); //works
        if (!x[1])        {
            alert("No information passed!");
        }
        else
        {   
            TITLE = decodeFredComponent(x[2]);
            ARRlines =decodeFredComponent(x[1]).split("\n");
            document.getElementById('header').innerHTML =TITLE;
            
            LONGline =longestLine();
            while (j < ARRlines.length)
            {
                var newLine= ARRlines[j];
                var ltype= lineType(ARRlines[j]);
                if (ltype=='irealb')
                {
                    iconLine ="<a href ="+newLine+"><img src = '../../icons/irealpro-icon.png'></a>"+ iconLine;
                }
                else if (ltype=='link'){
                    iconLine = iconLine +"<a href ="+newLine+"><img src = '../../icons/notes.png'></a>";
                }
                else
                {
                    if (ltype=='note') {newLine ="<X1>"+newLine+"</X1>";}
                    else if (ltype=='chord') {newLine ="<X2>"+newLine+"</X2>";}
                    else if (ltype=='header') {newLine ="<X3>"+newLine+"</X3>";}
                    else if (ltype=='spacer') {newLine ="<X4>"+newLine+"</X4>";}
                    else if (ltype=='lyric') {newLine ="<X4>"+newLine+"</X4>";}
                    htmlStr = htmlStr + newLine +"<br>";
                }
            j = j+1;
            }
        }
        htmlStr ="<center>" + iconLine +"</center><br>"+htmlStr;
        
        document.getElementById('notes').innerHTML =htmlStr;

    }
    
function XXXlineType(str)//determine line type lyric, chord header,hash
    {   
        var ans ="lyric";
        if (str.substring (0,7)=="irealb:"){ans = "irealb";}    
        else if (str.substring (0,1)=="@")  {ans = "note";}
        else if (str.substring (0,1)=="#") {ans = "header";}
        else if (str.substring (0,1)=="$") {ans = "spacer";}
        else if (str.search(":")>-1) {ans = "hash";}
        else if (str.indexOf("|") >-1){ans ="chord";}
        return ans;
    }   
function longestLine()
    {   var count =0;
        var i=0;
        while (i < ARRlines.length)
        {
            if (ARRlines[i].length > count & lineType(ARRlines[i])!=='irealb'){count = ARRlines[i].length;}
            i = i+1;
        }    
        return count;
    }
</script>
<SCRIPT type="text/javascript" SRC = "CommonLyric.js"></SCRIPT>
</body></html>